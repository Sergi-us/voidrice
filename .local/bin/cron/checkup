#!/bin/sh

# SARBS 07.07.2024
# Synchronisiert Repositories und lÃ¤dt Updates herunter, soll als Cronjob ausgefÃ¼hrt werden.

notify-send "ğŸ“¦ Repository-Synchronisierung" "ÃœberprÃ¼fen auf Paket-Updates..."

sudo pacman -Syyuw --noconfirm || notify-send "Fehler beim Herunterladen der Updates.

ÃœberprÃ¼fen Sie Ihre Internetverbindung, ob pacman/YAY bereits lÃ¤uft, oder fÃ¼hren Sie das Update manuell aus, um Fehler zu sehen."
pkill -RTMIN+8 "${STATUSBAR:-dwmblocks}"

if pacman -Qu | grep -v "\[ignored\]"
then
	notify-send "ğŸ Repository-Synchronisierung" "Updates verfÃ¼gbar. Klicken Sie auf das Statusleisten-Symbol (ğŸ“¦) fÃ¼r das Update."
else
	notify-send "ğŸ“¦ Repository-Synchronisierung" "Synchronisierung abgeschlossen. Keine neuen Pakete fÃ¼r das Update."
fi
