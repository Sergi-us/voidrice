#!/bin/sh
# SARBS 07.07.2024
# Als Cron-Job einrichten, um nach neuen RSS-EintrÃ¤gen fÃ¼r Newsboat zu suchen.
# Wenn Newsboat geÃ¶ffnet ist, sendet es den "R"-Tastendruck zum Aktualisieren.

/usr/bin/notify-send "ðŸ“° Aktualisiere RSS-Feeds..."

pgrep -f newsboat$ && /usr/bin/xdotool key --window "$(/usr/bin/xdotool search --name "^newsboat$")" R && exit

echo ðŸ”ƒ > /tmp/newsupdate
pkill -RTMIN+6 "${STATUSBAR:-dwmblocks}"
/usr/bin/newsboat -x reload
rm -f /tmp/newsupdate
pkill -RTMIN+6 "${STATUSBAR:-dwmblocks}"
/usr/bin/notify-send "ðŸ“° RSS-Feed-Aktualisierung abgeschlossen."
