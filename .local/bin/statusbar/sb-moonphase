#!/bin/sh

# Shows the current moon phase.

moonfile="${XDG_DATA_HOME:-$HOME/.local/share}/moonphase"

[ -s "$moonfile" ] && [ "$(stat -c %y "$moonfile" 2>/dev/null | cut -d' ' -f1)" = "$(date '+%Y-%m-%d')" ] ||
	{ curl -sf "wttr.in/?format=%m" > "$moonfile" || exit 1 ;}

icon="$(cat "$moonfile")"

case "$icon" in
    ğŸŒ‘) name="New" ;;
    ğŸŒ’) name="Waxing Crescent" ;;
    ğŸŒ“) name="First Quarter" ;;
    ğŸŒ”) name="Waxing Gibbous" ;;
    ğŸŒ•) name="Full" ;;
    ğŸŒ–) name="Waning Gibbous" ;;
    ğŸŒ—) name="Last Quarter" ;;
    ğŸŒ˜) name="Waning Crescent" ;;
    *) exit 1 ;;
esac

####case "$icon" in
####    î) name="New" ;;
####    ó°½§) name="Waxing Crescent" ;;
####    ó°½¡) name="First Quarter" ;;
####    ó°½¨) name="Waxing Gibbous" ;;
####    ó°½¢) name="Full" ;;
####    ó°½¦) name="Waning Gibbous" ;;
####    ó°½£) name="Last Quarter" ;;
####    ó°½¥) name="Waning Crescent" ;;
####    *) exit 1 ;;
####esac

echo "${icon-?}"

case $BLOCK_BUTTON in
	3) notify-send "ğŸŒœ Moon phase module" "Displays current moon phase.
- ğŸŒ‘: New
- ğŸŒ’: Waxing Crescent
- î : First Quarter
- ğŸŒ”: Waxing Gibbous
- ğŸŒ•: Full
- ğŸŒ–: Waning Gibbous
- ó°½£ : Last Quarter
- ğŸŒ˜: Waning Crescent" ;;
	6) setsid -f "$TERMINAL" -e "$EDITOR" "$0" ;;
esac


# îˆ  uniF0D0; E3C8
# î‰  uniF0D1; E3C9
# îŠ  uniF0D2; E3CA
# î‹  uniF0D3; E3CB
# îŒ  uniF0D4; E3CC
# î  uniF0D5; E3CD
# î  uniF0D6; E3CE
# î  uniF0D7; E3CF
# î  uniF0D8; E3D0
# î‘  uniF0D9; E3D1
# î’  uniF0DA; E3D2
# î“  uniF0DB; E3D3
# î”  uniF0DC; E3D4
# î•  uniF0DD; E3D5
# î–  uniF0DE; E3D6
# î—  uniF0DF; E3D7
# î˜  uniF0E0; E3D8
# î™  uniF0E1; E3D9
# îš  uniF0E2; E3DA
# î›  uniF0E3; E3DB
# îœ  uniF0E4; E3DC
# î  uniF0E5; E3DD
# î  uniF0E6; E3DE
# îŸ  uniF0E7; E3DF
# î   uniF0E8; E3E0
# î¡  uniF0E9; E3E1
# î¢  uniF0EA; E3E2
# î£  uniF0EB; E3E3
