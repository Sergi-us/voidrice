# Zusammenfassung aller Befehle und Tools zur Einrichtung der Firewall (UFW) und des Monitorings auf Arch Linux

## Installation und Konfiguration von UFW

    UFW installieren:

    sh

sudo pacman -S ufw

UFW aktivieren und Standardregeln setzen:

sh

sudo ufw default deny incoming
sudo ufw default allow outgoing

Erlaube SSH-Verbindungen (Port 22):

sh

sudo ufw allow 22/tcp

Erlaube HTTP-Verbindungen (Port 80):

sh

sudo ufw allow 80/tcp

Erlaube HTTPS-Verbindungen (Port 443):

sh

sudo ufw allow 443/tcp

UFW aktivieren:

sh

    sudo ufw enable

Fehlerbehebung für UFW

    Überprüfen, ob iptables installiert ist:

    sh

sudo pacman -S iptables

Kernel-Module laden:

sh

sudo modprobe ip_tables
sudo modprobe ip6_tables

Überprüfen, ob iptables jetzt funktioniert:

sh

sudo iptables -L

iptables-nft installieren:

sh

sudo pacman -S iptables-nft

iptables und ip6tables auf nft umstellen:

sh

sudo update-alternatives --set iptables /usr/sbin/iptables-nft
sudo update-alternatives --set ip6tables /usr/sbin/ip6tables-nft

UFW deaktivieren und reaktivieren:

sh

sudo ufw disable
sudo ufw enable

Regel hinzufügen (z.B. SSH):

sh

    sudo ufw allow 22/tcp

Monitoring mit logwatch

    logwatch installieren:

    sh

sudo pacman -S logwatch

logwatch konfigurieren:

sh

sudo mkdir /etc/logwatch/conf/
sudo cp /usr/share/logwatch/default.conf/logwatch.conf /etc/logwatch/conf/logwatch.conf

logwatch ausführen:

sh

sudo logwatch --output file --format text --range today --filename /var/log/logwatch.log

Automatisches tägliches Logwatch-Reporting einrichten:

    Erstelle einen cron job:

    sh

sudo crontab -e

Füge folgende Zeile hinzu, um logwatch täglich um 6 Uhr morgens auszuführen:

sh

        0 6 * * * /usr/sbin/logwatch --output mail --mailto deine-email@domain.de --detail low

Optional: GUFW installieren (grafische Oberfläche für UFW)

    gufw installieren:

    sh

sudo pacman -S gufw

gufw starten:

sh

    gufw

Zusammenfassung der wichtigsten Befehle

sh

# UFW installieren und konfigurieren
sudo pacman -S ufw
sudo ufw default deny incoming
sudo ufw default allow outgoing
sudo ufw allow 22/tcp  # SSH
sudo ufw allow 80/tcp  # HTTP
sudo ufw allow 443/tcp  # HTTPS
sudo ufw enable

# Fehlerbehebung für UFW
sudo pacman -S iptables
sudo modprobe ip_tables
sudo modprobe ip6_tables
sudo iptables -L
sudo pacman -S iptables-nft
sudo update-alternatives --set iptables /usr/sbin/iptables-nft
sudo update-alternatives --set ip6tables /usr/sbin/ip6tables-nft
sudo ufw disable
sudo ufw enable
sudo ufw allow 22/tcp

# Monitoring mit logwatch
sudo pacman -S logwatch
sudo mkdir /etc/logwatch/conf/
sudo cp /usr/share/logwatch/default.conf/logwatch.conf /etc/logwatch/conf/logwatch.conf
sudo logwatch --output file --format text --range today --filename /var/log/logwatch.log
sudo crontab -e
# Füge folgende Zeile hinzu:
0 6 * * * /usr/sbin/logwatch --output mail --mailto deine-email@domain.de --detail low

# Optional: GUFW installieren
sudo pacman -S gufw
gufw

Diese Befehle und Schritte sollten dir helfen, deine UFW-Firewall sicher zu konfigurieren und ein grundlegendes Monitoring mit logwatch einzurichten. Wenn du weitere Fragen oder Probleme hast, lass es mich wissen!
